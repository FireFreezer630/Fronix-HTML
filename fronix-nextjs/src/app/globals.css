@import "tailwindcss";
@import "tw-animate-css";
@import "katex/dist/katex.min.css";
@import "highlight.js/styles/atom-one-dark.css";

/* Removed Shadcn UI default CSS variables and @layer base rules to prevent conflicts with custom Tailwind config */

body { -webkit-text-size-adjust: 100%; -webkit-tap-highlight-color: transparent; line-height: 1.5; }
:not(.vt-enabled) * { transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease; }
@media (max-width: 767px) { #sidebar { position: fixed; z-index: 40; height: 100%; transform: translateX(-100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); } #sidebar.open { transform: translateX(0); } #sidebar-overlay { position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 30; opacity: 0; transition: opacity 0.3s ease-in-out; pointer-events: none; } #sidebar-overlay.open { opacity: 1; pointer-events: auto; } }
@media (min-width: 768px) { #sidebar { width: 260px; transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1); } #sidebar.closed { margin-left: -260px; } }
.sidebar-item-actions { opacity: 0; transition: opacity 0.15s ease-in-out; }
.group:hover .sidebar-item-actions { opacity: 1; }
.modal-container { position: fixed; inset: 0; z-index: 50; display: flex; align-items: center; justify-content: center; background-color: rgba(0,0,0,0.4); padding: 1rem; padding-bottom: 5rem; } /* Added padding for mobile */
.modal-content { transform: scale(0.95); opacity: 0; max-height: 90vh; overflow-y: auto; } /* Added max-height and overflow for scrolling */
#model-dropdown, #chat-actions-dropdown { display: none; position: absolute; z-index: 50; }
.loader-dot { animation: pendulum 1.2s infinite ease-in-out; }
.loader-dot:nth-child(2) { animation-delay: 0.15s; }
.loader-dot:nth-child(3) { animation-delay: 0.3s; }

@keyframes reveal {
  from {
    clip-path: circle(0 at var(--cx) var(--cy));
  }
  to {
    clip-path: circle(150% at var(--cx) var(--cy));
  }
}

::view-transition-old(root) {
  animation: none;
}

::view-transition-new(root) {
  animation: reveal 0.6s ease-in-out both;
}
.blinking-cursor { display: inline-block; width: 8px; height: 8px; background-color: currentColor; border-radius: 50%; animation: blink 1s infinite; }

/* --- ADDED: CUSTOM PROSE STYLING --- */
.prose {
  line-height: 1.7;
  color: var(--tw-prose-body); /* Fallback for browsers not supporting @apply */
}
.dark .prose {
    color: var(--tw-prose-invert-body);
}

.prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 { 
  margin-top: 1.5em; 
  margin-bottom: 0.5em; 
  font-weight: 600;
  color: var(--tw-prose-headings);
}
.dark .prose h1, .dark .prose h2, .dark .prose h3, .dark .prose h4, .dark .prose h5, .dark .prose h6 { 
    color: var(--tw-prose-invert-headings);
}
.prose h1 { font-size: 1.875rem; } /* text-3xl */
.prose h2 { font-size: 1.5rem; }    /* text-2xl */
.prose h3 { font-size: 1.25rem; }  /* text-xl */
.prose h4 { font-size: 1.125rem; } /* text-lg */

.prose a { color: #4F46E5; text-decoration: none; }
.prose a:hover { text-decoration: underline; }
.dark .prose a { color: #6D6AEC; }

.prose blockquote {
    border-left: 4px solid #E5E5E6;
    padding-left: 1rem;
    font-style: italic;
    color: #6B7280;
}
.dark .prose blockquote {
    border-left-color: #3A3A3A;
    color: #A1A1AA;
}

.prose code:not(pre > code) {
    background-color: #F0F0F0;
    color: #18181B;
    border-radius: 0.375rem; /* rounded-md */
    padding: 0.25rem 0.5rem;
    font-size: 0.875em;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
.dark .prose code:not(pre > code) {
    background-color: #2C2C2C;
    color: #EAEAEA;
}

.prose pre {
    background-color: #282c34; /* atom-one-dark background */
    border-radius: 0.5rem; /* rounded-lg */
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    overflow: hidden;
}
.prose pre code {
  background-color: transparent;
  padding: 1rem;
  display: block;
  overflow-x: auto;
  font-size: 0.875em;
  color: #abb2bf; /* Default text color for atom-one-dark */
}

.prose ul { list-style-type: disc; padding-left: 1.75rem; }
.prose ol { list-style-type: decimal; padding-left: 1.75rem; }
.prose li { margin-top: 0.25rem; margin-bottom: 0.25rem; }

.prose table { width: 100%; border-collapse: collapse; }
.prose th, .prose td { border: 1px solid #E5E5E6; padding: 0.5rem 1rem; }
.dark .prose th, .dark .prose td { border-color: #3A3A3A; }
.prose th { background-color: #F7F7F8; font-weight: 600; }
.dark .prose th { background-color: #1C1C1C; }
.prose tr:nth-child(even) { background-color: #F7F7F8; }
.dark .prose tr:nth-child(even) { background-color: #1C1C1C; }

.prose hr { border-color: #E5E5E6; margin-top: 2rem; margin-bottom: 2rem; }
.dark .prose hr { border-color: #3A3A3A; }

@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
@keyframes pendulum { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }
